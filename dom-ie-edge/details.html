<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta charset='utf-8'>
    <title>DOM: Analysis of failed tests</title>
    <link rel='stylesheet' href='bootstrap.min.css'>
    <link rel='stylesheet' href='analysis.css'>
  </head>
  <body>
    <div class='container'>
      <header>
        <h1>DOM: Analysis of failed tests</h1>
      </header>
      <section>
        <p>Nearby: <a href="less-than-2.html">less-than-2</a>, <a href="complete-fails.html">complete-fails</a>, <a href="all.html">all results</a>,
      </section>
      <section>
        <h2>Introduction</h2>
        <p>
          NOTE: this analysis is final (2014-10-06).
        </p>
        <p>
          Historically, W3C test suites have altogether too often been subpar in their coverage,
          barely scraping the surface of interoperability. In such a context, with only a few
          hundred simple tests, it is naturally expected that one would expect to hit the 100%
          pass mark.
        </p>
        <p>
          With the more recent focus on testing however, notably through the
          <a href='https://github.com/w3c/web-platform-tests/'>Web Platform Tests</a> and
          <a href='http://testthewebforward.org/'>Test The Web Forward</a> projects the quality
          of test suites has improved massively. And since we don't live in a perfect world, if one
          looks for trouble hard enough one will find it.
        </p>
        <p>
          <a href="https://github.com/w3c/web-platform-tests/tree/master/dom">The DOM test suite</a>,
          which is over 50,000 tests (and growing), certainly did set out
          to look for trouble, like its HTML counterpart. Given that, it seems useful to accompany the
          test results with this
          this note explaining where the failures come from.
        </p>
        <p>
          In total, 353 tests fail to pass in two implementations, which amounts to 0.69% of the
          total. The sections below provide context in which to appraise these failures.
        </p>
      </section>
      <section>
        <h2>WebIDL</h2>
        <p>
          278 of the failures (79%) or less are linked to <a href="http://www.w3c-test.org/dom/interfaces.html">WebIDL-related problems</a>. Essentially, they are
          attributes being present on instances instead of prototypes, wrong exception types, and
          other similar issues.
        </p>
<p>DOM4 (4 failures) also introduces a <a href="http://www.w3c-test.org/dom/nodes/Document-constructor.html">constructor for Document object</a>, which is only supported by one implementation so far.</p>
<p><a href="http://www.w3c-test.org/dom/errors/exceptions.html">DOMException</a> (2 failures) doesn't own the message property properly.</p>
        <p>
          These will get better over time as WebIDL compliance progresses. It is a slow process,
          but also one that does not threaten to break DOM (or other specifications depending on
          WebIDL).
        </p>
        <p>
          These failures do not adversely affect regular everyday development.
        </p>
      </section>
      <section>
        <h2>Miscellaneous</h2>
        <p>
          The remaining 81 failing test cases do not appear to subject themselves
          to easy categorisation. Many of these are corner cases that have little impact on everyday
          development, if any.
        </p>
      </section>
      <section>
        <h2>Conclusion</h2>
        <p>
          Considering that:
        </p>
        <ol>
          <li>
            the volume of failures is really low to start with (we have over 99%% success over
            50,000 tests);
          </li>
          <li>
            79% of failures come from WebIDL with minimal risk to practical interoperability;
          </li>
          <li>
            the percentage of issues that point to problems that could affect developers is
            so vanishingly small as to be negligible and none of the remaining tests indicates
            a failure in interoperability;
          </li>
        </ol>
        <p>
          We contend that the specification being proposed for advancement through the process has
          demonstrated interoperability.
        </p>
      </section>
    </div>
  </body>
</html>
